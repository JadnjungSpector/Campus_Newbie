"use strict";
const { solelyContainsHTTPTokenCodePoints } = require("./utils.js");

module.exports = mimeType => {
  let serialization = `${mimeType.type}/${mimeType.subtype}`;

  if (mimeType.parameters.size === 0) {
    return serialization;
  }

  for (let [name, value] of mimeType.parameters) {
    serialization += ";";
    serialization += name;
    serialization += "=";

    if (!solelyContainsHTTPTokenCodePoints(value) || value.length === 0) {
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
      value = value.replace(/(["\\])/g, "\\$1");
=======
      value = value.replace(/(["\\])/ug, "\\$1");
>>>>>>> cbaeadb69664be713d49558df22b6f02c48f3384
=======
=======
>>>>>>> ee12506f5 (figuring out lint)
      value = value.replace(/(["\\])/ug, "\\$1");
=======
      value = value.replace(/(["\\])/g, "\\$1");
>>>>>>> 6be43a322 (figuring out lint)
<<<<<<< HEAD
>>>>>>> 84b8e337c (figuring out lint)
=======
=======
      value = value.replace(/(["\\])/g, "\\$1");
>>>>>>> 6be43a322 (figuring out lint)
>>>>>>> ee12506f5 (figuring out lint)
      value = `"${value}"`;
    }

    serialization += value;
  }

  return serialization;
};
